{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst loaderEl = document.querySelector('.loader')\nlet gallery = new SimpleLightbox('.gallery a');\nconst listEl = document.querySelector('.img-list')\nimport { hideLoader, endColection } from \"../main\";\nexport function createElements(values) {\n       const markup = values.hits\n    .map(value => {\n      return `<li class=\"list-el\">\n                <a href=\"${value.largeImageURL}\"><img src='${value.webformatURL}' alt='${value.tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${value.likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${value.views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${value.comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${value.downloads}</p></div>\n                </div>\n            </li>`;\n    })\n        .join('');\n    listEl.textContent = '';\n    listEl.innerHTML=( markup);\n    hideLoader();\n    gallery.refresh();\n}\n export function createElementsMore(values) {\n       const markup = values.hits\n    .map(value => {\n      return `<li class=\"list-el\">\n                <a href=\"${value.largeImageURL}\"><img src='${value.webformatURL}' alt='${value.tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${value.likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${value.views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${value.comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${value.downloads}</p></div>\n                </div>\n            </li>`;\n    })\n        .join('');\n     listEl.insertAdjacentHTML('beforeend', markup);\n     endColection();\n     hideLoader();\n     gallery.refresh();\n }","import axios from \"axios\";\nexport async function searchImg(value, page) {\n    axios.defaults.baseURL = 'https://pixabay.com';\n\n  const params = {\n    key: '44349742-ecc8a7b60aea5585f0c207813',\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get('/api/', { params });\n      return response.data;\n  } catch (err) {\n    console.log(err);\n  }\n};\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n import { createElements, createElementsMore } from \"./js/render-functions.js\";\nimport { searchImg } from './js/pixabay-api.js';\nconst formEl = document.querySelector('.form-el');\nconst listEl = document.querySelector('.img-list')\nconst loaderEl = document.querySelector('.loader')\nconst btnLoad = document.querySelector('.btn-load')\nfunction showLoader() {\n  loaderEl.classList.remove('visually-hidden')\n}\nexport function hideLoader() {\n  loaderEl.classList.add('visually-hidden')\n}\n\nlet page = 1;\nlet value;\nlet maxPage = 1;\nconst perPage = 15;\nformEl.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    page = 1;\n    value = formEl.elements[0].value.trim();\n    showLoader()\n    if (!value) {\n        hideLoader();\n        iziToast.error({\n            message: 'Info Search input must be filled!',\n        });\n        return;\n    } else {\n        btnLoad.classList.add('visually-hidden');\n        const dataImg = await searchImg(value, page)\n        maxPage = Math.ceil(dataImg.totalHits / perPage);\n        // if (Event.target.value !== value) {\n        //     page = 1;\n            \n        // } else {\n        //     page++\n        // }\n        try {\n              if (dataImg.hits.length === 0) {\n                hideLoader();\n                listEl.innerHTML = '';\n                throw new Error('Error! Nothing to load');\n            } else {\n                  createElements(dataImg)\n                  endColection();\n            }\n        } catch(error) {\n        iziToast.show({\n            title: 'Sorry',\n            message: 'there are no images matching your search query. Please try again!',\n            color: 'red',\n        })\n    }; \n    }\n});\nbtnLoad.addEventListener('click', async () => {\n    btnLoad.classList.add('visually-hidden');\n    page++;\n    showLoader()\n    try {\n          const dataImg = await searchImg(value, page)\n        createElementsMore(dataImg)\n        scrollEl()\n    } catch (err) {\n        console.log(err)\n    }\n  \n\n})\n export function endColection() {\n    if (page >= maxPage) {\n     iziToast.show({\n            message: 'Were sorry, but you have reached the end of search results',\n     });\n         btnLoad.classList.add('visually-hidden');\n    } else {\n        btnLoad.classList.remove('visually-hidden');\n }\n}\nfunction scrollEl() {\n    const liEl = listEl.children[0]\n    const height = liEl.getBoundingClientRect().height\n\n    window.scrollBy({\n        top: height * 2,\n        behavior:'smooth',\n    })\n}"],"names":["gallery","SimpleLightbox","listEl","createElements","values","markup","value","hideLoader","createElementsMore","endColection","searchImg","page","axios","params","err","formEl","loaderEl","btnLoad","showLoader","maxPage","perPage","e","dataImg","iziToast","scrollEl","height"],"mappings":"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"}